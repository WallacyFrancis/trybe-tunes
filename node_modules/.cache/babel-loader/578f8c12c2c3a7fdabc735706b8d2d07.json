{"ast":null,"code":"var _jsxFileName = \"/home/wallacy/Documentos/Aulas_Trybe/Projetos/trybetunes/sd-014-b-project-trybetunes/src/pages/Album.js\";\nimport React from 'react';\nimport Header from '../components/Header';\nimport getMusics from '../services/musicsAPI';\nimport Carregando from '../Carregando';\nimport MusicCard from '../components/MusicCard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Album extends React.Component {\n  constructor() {\n    super();\n    this.requestMusic = this.requestMusic.bind(this);\n    this.requestAlbumInfo = this.requestAlbumInfo.bind(this);\n    this.state = {\n      loading: false,\n      tracks: [],\n      error: false,\n      errorMsg: '',\n      artist: '',\n      album: ''\n    };\n  }\n\n  componentDidMount() {\n    this.requestMusic();\n  }\n\n  async requestMusic() {\n    this.setState({\n      loading: true\n    });\n    const URL = window.location.href;\n    const id = URL.split('album/');\n\n    try {\n      const musics = await getMusics(id[1]);\n      this.requestAlbumInfo(musics);\n      return musics;\n    } catch (e) {\n      this.setState({\n        error: true,\n        errorMsg: `Ops! aconteceu um erro ${e}, recarregue sua página`,\n        loading: false\n      });\n    }\n  }\n\n  requestAlbumInfo(album) {\n    const objToArr = Object.values(album);\n    this.setState({\n      artist: objToArr[0].artistName,\n      album: objToArr[0].collectionName\n    });\n    objToArr.shift();\n    this.setState({\n      tracks: objToArr,\n      loading: false\n    });\n    console.log(objToArr);\n  }\n\n  render() {\n    const {\n      loading,\n      tracks,\n      error,\n      errorMsg,\n      album,\n      artist\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-testid\": \"page-album\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(Carregando, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this) : '', error ? errorMsg : '', /*#__PURE__*/_jsxDEV(\"h3\", {\n        \"data-testid\": \"album-name\",\n        children: album\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        \"data-testid\": \"artist-name\",\n        children: artist\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), tracks.map((music, index) => /*#__PURE__*/_jsxDEV(MusicCard, {\n        previewUrl: music.collectionViewUrl,\n        trackName: music.artistViewUrl,\n        number: index + 1,\n        trackId: music.trackId\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Album;","map":{"version":3,"sources":["/home/wallacy/Documentos/Aulas_Trybe/Projetos/trybetunes/sd-014-b-project-trybetunes/src/pages/Album.js"],"names":["React","Header","getMusics","Carregando","MusicCard","Album","Component","constructor","requestMusic","bind","requestAlbumInfo","state","loading","tracks","error","errorMsg","artist","album","componentDidMount","setState","URL","window","location","href","id","split","musics","e","objToArr","Object","values","artistName","collectionName","shift","console","log","render","map","music","index","collectionViewUrl","artistViewUrl","trackId"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Header from '../components/Header';\nimport getMusics from '../services/musicsAPI';\nimport Carregando from '../Carregando';\nimport MusicCard from '../components/MusicCard';\n\nclass Album extends React.Component {\n  constructor() {\n    super();\n    this.requestMusic = this.requestMusic.bind(this);\n    this.requestAlbumInfo = this.requestAlbumInfo.bind(this);\n    this.state = {\n      loading: false,\n      tracks: [],\n      error: false,\n      errorMsg: '',\n      artist: '',\n      album: '',\n    };\n  }\n\n  componentDidMount() {\n    this.requestMusic();\n  }\n\n  async requestMusic() {\n    this.setState({ loading: true });\n    const URL = window.location.href;\n    const id = URL.split('album/');\n    try {\n      const musics = await getMusics(id[1]);\n      this.requestAlbumInfo(musics);\n      return musics;\n    } catch (e) {\n      this.setState({\n        error: true,\n        errorMsg: `Ops! aconteceu um erro ${e}, recarregue sua página`,\n        loading: false,\n      });\n    }\n  }\n\n  requestAlbumInfo(album) {\n    const objToArr = Object.values(album);\n    this.setState({\n      artist: objToArr[0].artistName,\n      album: objToArr[0].collectionName,\n    });\n    objToArr.shift();\n    this.setState({\n      tracks: objToArr,\n      loading: false,\n    });\n    console.log(objToArr);\n  }\n\n  render() {\n    const { loading, tracks, error, errorMsg, album, artist } = this.state;\n    return (\n      <div data-testid=\"page-album\">\n        <Header />\n        { loading ? <Carregando /> : '' }\n        { error ? errorMsg : ''}\n        <h3 data-testid=\"album-name\">{ album }</h3>\n        <h4 data-testid=\"artist-name\">{ artist }</h4>\n        {\n          tracks.map((music, index) => (\n            <MusicCard\n              key={ index }\n              previewUrl={ music.collectionViewUrl }\n              trackName={ music.artistViewUrl }\n              number={ index + 1 }\n              trackId={ music.trackId }\n            />\n          ))\n        }\n      </div>\n    );\n  }\n}\n\nexport default Album;\n"]},"metadata":{},"sourceType":"module"}